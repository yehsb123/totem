// dashboard/data/sns.ts

// SNS 제주도 언급량 데이터 (Line Chart용)
export const jejuMentionsData = [
  { name: "2024-07", 언급량: 324180 },
  { name: "2024-08", 언급량: 312792 },
  { name: "2024-09", 언급량: 270913 },
  { name: "2024-10", 언급량: 286289 },
  { name: "2024-11", 언급량: 346212 },
  { name: "2024-12", 언급량: 270694 },
  { name: "2025-01", 언급량: 267783 },
  { name: "2025-02", 언급량: 251683 },
  { name: "2025-03", 언급량: 301173 },
  { name: "2025-04", 언급량: 293355 },
  { name: "2025-05", 언급량: 303882 },
  { name: "2025-06", 언급량: 300103 },
];

/**
 * 월별 동반유형 데이터*/

export const monthlyCompanionTypeData = [
  {
    month: "2024-07",
    companionTypes: [
      { name: "기타가족", value: 66758 },
      { name: "친구", value: 46078 },
      { name: "회사동료", value: 29158 },
      { name: "부모님", value: 27266 },
      { name: "싱글", value: 17992 },
      { name: "자녀", value: 17843 },
      { name: "연인", value: 14005 },
      { name: "배우자", value: 12317 },
      { name: "학생", value: 4880 },
    ],
  },
  {
    month: "2024-08",
    companionTypes: [
      { name: "기타가족", value: 65455 },
      { name: "친구", value: 43219 },
      { name: "회사동료", value: 27244 },
      { name: "부모님", value: 26580 },
      { name: "자녀", value: 17152 },
      { name: "싱글", value: 16041 },
      { name: "연인", value: 13569 },
      { name: "배우자", value: 10998 },
      { name: "학생", value: 4711 },
    ],
  },
  {
    month: "2024-09",
    companionTypes: [
      { name: "기타가족", value: 57947 },
      { name: "친구", value: 37493 },
      { name: "부모님", value: 24509 },
      { name: "회사동료", value: 24098 },
      { name: "싱글", value: 14940 },
      { name: "자녀", value: 14246 },
      { name: "연인", value: 11441 },
      { name: "배우자", value: 9560 },
      { name: "학생", value: 3813 },
    ],
  },
  {
    month: "2024-10",
    companionTypes: [
      { name: "기타가족", value: 59841 },
      { name: "친구", value: 40777 },
      { name: "회사동료", value: 25584 },
      { name: "부모님", value: 24751 },
      { name: "자녀", value: 16231 },
      { name: "싱글", value: 16047 },
      { name: "연인", value: 11720 },
      { name: "배우자", value: 11388 },
      { name: "학생", value: 4129 },
    ],
  },
  {
    month: "2024-11",
    companionTypes: [
      { name: "기타가족", value: 73507 },
      { name: "친구", value: 49620 },
      { name: "부모님", value: 31386 },
      { name: "회사동료", value: 30853 },
      { name: "자녀", value: 21818 },
      { name: "싱글", value: 19056 },
      { name: "연인", value: 14044 },
      { name: "배우자", value: 14025 },
      { name: "학생", value: 5569 },
    ],
  },
  {
    month: "2024-12",
    companionTypes: [
      { name: "기타가족", value: 56546 },
      { name: "친구", value: 44650 },
      { name: "회사동료", value: 26780 },
      { name: "부모님", value: 22384 },
      { name: "싱글", value: 14477 },
      { name: "연인", value: 13449 },
      { name: "자녀", value: 12761 },
      { name: "배우자", value: 8726 },
      { name: "학생", value: 3159 },
    ],
  },
  {
    month: "2025-01",
    companionTypes: [
      { name: "기타가족", value: 56763 },
      { name: "친구", value: 43313 },
      { name: "회사동료", value: 23129 },
      { name: "부모님", value: 22563 },
      { name: "싱글", value: 15406 },
      { name: "연인", value: 13678 },
      { name: "자녀", value: 12283 },
      { name: "배우자", value: 8315 },
      { name: "학생", value: 3113 },
    ],
  },
  {
    month: "2025-02",
    companionTypes: [
      { name: "기타가족", value: 46031 },
      { name: "친구", value: 37921 },
      { name: "부모님", value: 27787 },
      { name: "회사동료", value: 20568 },
      { name: "싱글", value: 13829 },
      { name: "연인", value: 12962 },
      { name: "자녀", value: 13025 },
      { name: "배우자", value: 7360 },
      { name: "학생", value: 3425 },
    ],
  },
  {
    month: "2025-03",
    companionTypes: [
      { name: "기타가족", value: 51555 },
      { name: "친구", value: 43977 },
      { name: "부모님", value: 30279 },
      { name: "회사동료", value: 27311 },
      { name: "싱글", value: 17577 },
      { name: "연인", value: 15748 },
      { name: "자녀", value: 14538 },
      { name: "배우자", value: 8335 },
      { name: "학생", value: 3937 },
    ],
  },
  {
    month: "2025-04",
    companionTypes: [
      { name: "기타가족", value: 51726 },
      { name: "친구", value: 40797 },
      { name: "부모님", value: 30764 },
      { name: "회사동료", value: 25961 },
      { name: "싱글", value: 16949 },
      { name: "연인", value: 16113 },
      { name: "자녀", value: 13722 },
      { name: "배우자", value: 9065 },
      { name: "학생", value: 3311 },
    ],
  },
  {
    month: "2025-05",
    companionTypes: [
      { name: "기타가족", value: 55832 },
      { name: "친구", value: 41745 },
      { name: "부모님", value: 32321 },
      { name: "회사동료", value: 27075 },
      { name: "싱글", value: 16899 },
      { name: "연인", value: 16056 },
      { name: "자녀", value: 14243 },
      { name: "배우자", value: 9156 },
      { name: "학생", value: 3767 },
    ],
  },
  {
    month: "2025-06",
    companionTypes: [
      { name: "기타가족", value: 53080 },
      { name: "친구", value: 42914 },
      { name: "부모님", value: 30018 },
      { name: "회사동료", value: 23870 },
      { name: "싱글", value: 16753 },
      { name: "연인", value: 15574 },
      { name: "자녀", value: 14427 },
      { name: "배우자", value: 9650 },
      { name: "학생", value: 4082 },
    ],
  },
];

/**
 * 전체 기간 동반유형 데이터 (Pie Chart용)
 * 위 monthlyCompanionTypeData를 기반으로 계산된 총합 데이터입니다.
 */
const calculateTotalCompanionTypeData = () => {
  const totals = new Map<string, number>();

  monthlyCompanionTypeData.forEach((monthData) => {
    monthData.companionTypes.forEach((type) => {
      const currentTotal = totals.get(type.name) || 0;
      totals.set(type.name, currentTotal + type.value);
    });
  });

  const totalValue = Array.from(totals.values()).reduce(
    (sum, value) => sum + value,
    0
  );

  return Array.from(totals.entries()).map(([name, value]) => ({
    name,
    value,
    percentage: parseFloat(((value / totalValue) * 100).toFixed(2)),
  }));
};

export const companionTypeData = calculateTotalCompanionTypeData();

/**
 * 월별 여행유형 데이터
 */
export const monthlyTravelTypeData = [
  {
    month: "2024-07",
    travelTypes: [
      { name: "기타", value: 30018 },
      { name: "휴식/힐링", value: 26661 },
      { name: "레포츠", value: 25690 },
      { name: "체험", value: 3438 },
      { name: "미식", value: 2076 },
    ],
  },
  {
    month: "2024-08",
    travelTypes: [
      { name: "기타", value: 28335 },
      { name: "레포츠", value: 27970 },
      { name: "휴식/힐링", value: 26150 },
      { name: "체험", value: 3256 },
      { name: "미식", value: 2112 },
    ],
  },
  {
    month: "2024-09",
    travelTypes: [
      { name: "기타", value: 24929 },
      { name: "휴식/힐링", value: 22580 },
      { name: "레포츠", value: 20077 },
      { name: "체험", value: 3396 },
      { name: "미식", value: 1884 },
    ],
  },
  {
    month: "2024-10",
    travelTypes: [
      { name: "휴식/힐링", value: 25394 },
      { name: "기타", value: 24828 },
      { name: "레포츠", value: 19581 },
      { name: "체험", value: 4387 },
      { name: "미식", value: 1631 },
    ],
  },
  {
    month: "2024-11",
    travelTypes: [
      { name: "휴식/힐링", value: 30150 },
      { name: "기타", value: 26578 },
      { name: "레포츠", value: 22858 },
      { name: "체험", value: 5024 },
      { name: "미식", value: 1724 },
    ],
  },
  {
    month: "2024-12",
    travelTypes: [
      { name: "휴식/힐링", value: 26172 },
      { name: "기타", value: 22143 },
      { name: "레포츠", value: 14237 },
      { name: "체험", value: 3799 },
      { name: "미식", value: 1411 },
    ],
  },
  {
    month: "2025-01",
    travelTypes: [
      { name: "휴식/힐링", value: 26948 },
      { name: "기타", value: 22143 },
      { name: "레포츠", value: 15000 },
      { name: "체험", value: 3697 },
      { name: "미식", value: 1432 },
    ],
  },
  {
    month: "2025-02",
    travelTypes: [
      { name: "휴식/힐링", value: 28537 },
      { name: "기타", value: 21208 },
      { name: "레포츠", value: 14746 },
      { name: "체험", value: 2941 },
      { name: "미식", value: 1343 },
    ],
  },
  {
    month: "2025-03",
    travelTypes: [
      { name: "휴식/힐링", value: 36862 },
      { name: "기타", value: 26005 },
      { name: "레포츠", value: 20229 },
      { name: "체험", value: 3382 },
      { name: "미식", value: 1438 },
    ],
  },
  {
    month: "2025-04",
    travelTypes: [
      { name: "휴식/힐링", value: 35931 },
      { name: "기타", value: 25008 },
      { name: "레포츠", value: 18537 },
      { name: "체험", value: 3930 },
      { name: "미식", value: 1541 },
    ],
  },
  {
    month: "2025-05",
    travelTypes: [
      { name: "휴식/힐링", value: 34836 },
      { name: "기타", value: 26341 },
      { name: "레포츠", value: 19850 },
      { name: "체험", value: 4078 },
      { name: "미식", value: 1683 },
    ],
  },
  {
    month: "2025-06",
    travelTypes: [
      { name: "휴식/힐링", value: 36749 },
      { name: "기타", value: 25062 },
      { name: "레포츠", value: 22406 },
      { name: "체험", value: 3820 },
      { name: "미식", value: 1698 },
    ],
  },
];

/**
 * 전체 기간 여행유형 데이터 (Pie Chart용)
 * 위 monthlyTravelTypeData를 기반으로 계산된 총합 데이터입니다.
 */
const calculateTotalTravelTypeData = () => {
  const totals = new Map<string, number>();

  monthlyTravelTypeData.forEach((monthData) => {
    monthData.travelTypes.forEach((type) => {
      const currentTotal = totals.get(type.name) || 0;
      totals.set(type.name, currentTotal + type.value);
    });
  });

  const totalValue = Array.from(totals.values()).reduce(
    (sum, value) => sum + value,
    0
  );

  return Array.from(totals.entries()).map(([name, value]) => ({
    name,
    value,
    percentage: parseFloat(((value / totalValue) * 100).toFixed(2)),
  }));
};

export const travelTypeData = calculateTotalTravelTypeData();
// dashboard/data/sns.ts 파일 맨 아래에 이 코드를 추가하세요.

/**
 * @param month "YYYY-MM" 형식의 월 문자열
 * @returns 해당 월을 포함한 이전 12개월의 언급량 데이터를 반환합니다.
 */
export const getJejuMentionsForChart = (month: string) => {
  const endIndex = jejuMentionsData.findIndex((d) => d.name === month);
  if (endIndex === -1) {
    return jejuMentionsData.slice(-12); // 해당 월을 못 찾으면 마지막 12개 반환
  }
  const startIndex = Math.max(0, endIndex - 11);
  return jejuMentionsData.slice(startIndex, endIndex + 1);
};

/**
 * @param month "YYYY-MM" 형식의 월 문자열
 * @returns 해당 월의 동반유형 데이터를 반환합니다. 없으면 빈 배열을 반환합니다.
 */
export const getCompanionTypeByMonth = (month: string) => {
  const monthData = monthlyCompanionTypeData.find(
    (data) => data.month === month
  );
  return monthData ? monthData.companionTypes : [];
};

/**
 * @param month "YYYY-MM" 형식의 월 문자열
 * @returns 해당 월의 여행유형 데이터를 반환합니다. 없으면 빈 배열을 반환합니다.
 */
export const getTravelTypeByMonth = (month: string) => {
  const monthData = monthlyTravelTypeData.find((data) => data.month === month);
  return monthData ? monthData.travelTypes : [];
};
